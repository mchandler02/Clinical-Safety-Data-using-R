# Data Analysis of Clinical Safety Data
## Background
A main component of data collected in medical device clinical trials is regarding patient safety. An adverse event is defined as “any untoward medical occurrence, unintended disease or injury, or untoward clinical signs (including an abnormal laboratory finding) in subjects, users or other persons, whether or not related to the investigational medical device” . The study data that was collected and used for this data analysis was for a trial for a medical device whose purpose was to reduce back and leg pain in patient with chronic pain conditions. It was an ISO14155:2011 compliant study, so all adverse events that a patient reported were collected, including any adverse events that are not assessed as related to the device, therapy, or procedure such as a broken arm. When looking at safety data throughout the course of a clinical trial, it is important to look for potential safety concerns that could unduly impact the patients enrolled. By aggregating the data and looking at it in different manners at various points during the study, we can identify what triggers could result in a greater patient risk which may result in further investigation and potential changes to the way a study is being conducted. By looking at the data in a graphic presentation, it is often easier to identify any potential data that needs to be assessed more closely since minimal statistical review is conducted mid-way through the study, so endpoint analysis is not affected. The event listings that were used in this analysis have been de-identified and some data, including the countries the subject identifiers and where events were reported have been changed from original data collection to be able to anonymize proprietary information. 

## Methods
To analyze the data that was collected, two Excel worksheets were imported into RStudio. Three packages were installed to be able to easily filter, count, and graph the information, tidyverse, plyr, and ggplot2. When beginning this project, I had planned to use for loops to determine the counts of subjects reporting events and the event terms. Upon further research, I found the count function available in the plyr package which required much less code to find these frequencies. Similarly, I had started to use for loops and if statements to determine the event terms for those that were related to the device and procedure, but also found that the tidyverse package has a filter function that made creating subsets of the data more concisely. After being filtered though, the structure of the data was noted as Classes ‘tbl_df’, ‘tbl’ and 'data.frame'. To be able to use the filtered data within the count function, it had to be converted back to a data frame using the as.dataframe function.

Since the data frame that was used had information for various event with not all fields completed, the na.omit function was needed for all graphs depicting the count of event codes since not all events had codes assigned to them. If this had not been used, “NA” would have been the highest reported event term. 

The ggplot2 package is part of the tidyverse package, but I had installed ggplot2 initially since I had planned to use it to create graphs. Using ggplot2, histograms and bar graphs were created to pictorially display important information with some information overlaid using a line or points. When learning how to use ggplot2 to create the graphs, I began using a Udemy course which outlined how to create histograms, bar graphs, and other basic themes.   Using this tool, I was able to learn how to add labels, titles, and change the color of the graph using standard color options or hex color codes. I spent the most time on and struggled the most to be able to include data from multiple datapoints on a single plot.  When I had tried to overlay additional data for the number of events reported per subject and per country, I found a Stack Overflow page describing how to combine multiple plots into a single graph.  This resource showed the plotting code in slightly different coding style which I found easier to understand and was able to use for the last plot I worked on for events reported per country. It was interesting to see the various styles of coding were able to create a similar output.

## Results
### Events reported per subject
The first method of graphically reviewing information is to look at how many events each subject has reported to date. By looking at this information, we are able to determine if there are any subjects that could potentially be an outlier who is reporting more events than the other subjects. The number of events reported for every subject that has reported events is graphed, but it does not display how many subjects did not report any adverse events. The red horizontal line represents the average number of adverse events reported per enrolled subject which is 6.3 events. From this figure, we can see that subject 9 has more than twenty adverse events reported which is nearly three times the average. This may trigger us to look more closely at the data for the subjects with a greater number of events to see whether these are events related to the device or procedure or if there are other unrelated underlying conditions that could be impacting the subjects’ well-being.
 
### Events reported per country
The next graph displays the number of events reported per country. To be able to normalize the data based on the number of subjects enrolled in each country, red dots have been added to the bar chart to show the average number of events reported per subject enrolled in the respective country. The event rates vary from 4.3 events per subject in Spain to 7.7 events per subject in France. Given the number of events reported and the number of subjects enrolled this range does not seem unreasonable, so I don’t think this would warrant any investigation into standard of care practices or a specific physician’s data collection methods at this time.
 
### Top events reported by MedDRA term
Adverse events are coded using the Medical Dictionary for Regulatory Activities (MedDRA) to be able to categorize like-type events. The coding is based on the diagnosis provided by the investigator at the site when they report the adverse event. The dictionary has a five-level hierarchy which consists of the Lower Level Term (LLT), the Preferred Term (PT), the High-Level Term (HLT), the High-Level Group Term (HLGT), and the System Organ Class (SOC). Each event is coded to the LLT and the rest of the hierarchy is automatically assigned. The PT is the most common term to use to report events because it provides the appropriate amount granularity to the different diagnoses.

The third figure displays the 20 most frequently reported adverse events reported in the study. Given that the subjects’ primary underlying condition of interest in this study was chronic back and leg pain, it is fairly easy to tell that a lot of these events would likely not have been related to the device or procedure, such as Influenza and Nasopharyngitis. For ISO14155:2011 compliant studies, it is required that all adverse events are reported, so we see a variety of event terms that may or may not be relevant to the study, but further review of procedure related and device related events are displayed below.

The top event of fall had been investigated for this study to determine whether there was any concern that nearly 30 were reported. The concern was due to the thought that the device could have impacted the subjects’ nerves or legs resulting in a higher than expected rate of occurrence than if the subjects had not received the treatment. Only one fall event was assessed as related to the procedure or device, so it was determined that there was no change needed for the study or device.
 
### Procedure related events
Procedure related events are considered any adverse event related to any aspect of the surgical implant or system modification (replacement, revision, or explant) of the investigational device. The next graphic displays all the MedDRA PTs for events that were assessed as related to the procedure. Implant site infection and Implant site pain are the top two reported events. Investigation into the implant site infections was conducted toward the beginning of the study due to a higher rate than expected with a seriousness component assessed which ultimately resulted in a change to the study protocol to aid in patient safety. Once the protocol update was made, there were no further implant site infections reported for the study. All other procedure related events were considered anticipated and at an expected rate.

### Device related events
Device related events were considered any event caused by any of the device system components that were implanted, used to implant the device, or used to deliver therapy externally. Device stimulation issues were the highest reported events in this category. Due to the expectedness of this type of event with this specific therapy and the low severity, there was no investigation needed. These events were often resolved with reprogramming of their devices. Implant site infections were the third highest event reported, but it is important to note that these are the same six events that were considered procedure related as procedure related and device related are not mutually exclusive categories.
 


